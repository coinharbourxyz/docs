<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Algorithmic Trading IDE Documentation</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        color: #e0e0e0;
        background-color: #1a1a1a;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        display: flex;
      }

      .content {
        flex: 1;
        max-width: 800px;
        padding-right: 40px;
      }

      .navbar {
        width: 200px;
        position: sticky;
        top: 20px;
        align-self: flex-start;
        background-color: #2c2c2c;
        padding: 20px;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        margin-right: 20px;
      }

      .navbar ul {
        list-style-type: none;
        padding-left: 0;
      }

      .navbar ul ul {
        padding-left: 20px;
      }

      .navbar a {
        text-decoration: none;
        color: #b0b0b0;
      }

      .navbar a:hover {
        color: #ffffff;
      }

      h1,
      h2,
      h3 {
        color: #ffffff;
      }

      pre {
        background-color: #2c2c2c;
        border: 1px solid #444;
        border-radius: 4px;
        padding: 10px;
        white-space: pre-wrap; /* Preserve whitespace */
        overflow: auto; /* Add scroll if needed */
        color: #66d9ef;
      }

      .method {
        margin-bottom: 30px;
      }

      .method h3 {
        margin-bottom: 10px;
      }

      table {
        border-collapse: collapse;
        width: 100%;
      }

      th,
      td {
        border: 1px solid #444;
        padding: 8px;
        text-align: left;
      }

      th {
        background-color: #2c2c2c;
      }

      .contact {
        margin-top: 20px;
        padding-right: 10px;
        padding-left: 10px;
        text-align: left;
        background-color: #2c2c2c;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      }

      .libraries {
        position: sticky;
        top: 20px;
        flex: 1;
        max-width: 250px;
        padding-right: 20px;
        padding-left: 20px;
        background-color: #2c2c2c;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        height: 100%;
      }

      a {
        color: #4da6ff;
      }

      a:hover {
        color: #66b3ff;
      }
    </style>
  </head>

  <body>
    <nav class="navbar">
      <h3>Exponential Markets</h3>
      <ul>
        <li><a href="#top">Go to Top</a></li>
        <li><a href="#assets-supported">Assets Supported</a></li>
        <li>
          <a href="#callback-functions">Callback Functions</a>
          <ul>
            <li><a href="#init">__init__</a></li>
            <li><a href="#on_ticker_recd">on_ticker_recd</a></li>
            <li><a href="#on_algo_start">on_algo_start</a></li>
            <li><a href="#on_algo_stop">on_algo_stop</a></li>
            <li><a href="#on_order_success">on_order_success</a></li>
            <li><a href="#on_order_error">on_order_error</a></li>
          </ul>
        </li>
        <li><a href="#dataset-fields">Dataset Fields</a></li>
        <li>
          <a href="#helper-methods">Helper Methods</a>
          <ul>
            <li><a href="#open_position">open_position</a></li>
            <li><a href="#close_position">close_position</a></li>
            <li><a href="#get_usd_balance">get_usd_balance</a></li>
            <li><a href="#get_open_positions">get_open_positions</a></li>
            <li><a href="#get_previous_tickers">get_previous_tickers</a></li>
          </ul>
        </li>
        <li><a href="#transaction-fees">Transaction Fees</a></li>
        <li>
          <a href="#sample-algorithms">Sample Algorithms</a>
          <ul>
            <li><a href="#sme">SME</a></li>
            <li><a href="#rsi">RSI</a></li>
            <li><a href="#macd">MACD</a></li>
            <li><a href="#mac">MA Crossover</a></li>
            <li><a href="#pt">Pairs Trading</a></li>
            <li><a href="#bb">Bollinger Bands</a></li>
          </ul>
        </li>
        <li>
          <br />
          <p class="text-center">Last Updated: 2024-07-23</p>
        </li>
      </ul>
      <div class="contact">
        <p>
          Missing something?
          <a href="mailto:contact@exponential.markets">Email us here</a> and
          we'll provide that to you ASAP
        </p>
      </div>
    </nav>
    <div class="content">
      <h1 id="top">Exponential Markets Dev Documentation</h1>
      <p>
        Welcome to the Exponential Markets developer documentation. Here you can
        find information on the callback functions, helper methods, and dataset
        fields for the Exponential Markets algorithmic trading platform. Want a
        feature added?
        <a href="mailto:contact@exponential.markets">Email us here</a> and we'll
        add it ASAP.
      </p>

      <h2 id="assets-supported">Assets Supported</h2>
      <table>
        <tr>
          <th>Name</th>
          <th>Symbol</th>
          <th>TradingView Link</th>
          <th>Years of Data Available</th>
          <th>Max Leverage</th>
        </tr>
        <tr>
          <td>AAVE</td>
          <td>AAVE</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/AAVEUSD/"
              >View</a
            >
          </td>
          <td>3</td>
          <td>50</td>
        </tr>
        <tr>
          <td>APE</td>
          <td>APE</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/APEUSD/"
              >View</a
            >
          </td>
          <td>1</td>
          <td>50</td>
        </tr>
        <tr>
          <td>ARB</td>
          <td>ARB</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/ARBUSD/"
              >View</a
            >
          </td>
          <td>1</td>
          <td>75</td>
        </tr>
        <tr>
          <td>ATOM</td>
          <td>ATOM</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/ATOMUSD/"
              >View</a
            >
          </td>
          <td>5</td>
          <td>60</td>
        </tr>
        <tr>
          <td>AVAX</td>
          <td>AVAX</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/AVAXUSD/"
              >View</a
            >
          </td>
          <td>3</td>
          <td>60</td>
        </tr>
        <tr>
          <td>BNB</td>
          <td>BNB</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/BNBUSD/"
              >View</a
            >
          </td>
          <td>6</td>
          <td>100</td>
        </tr>
        <tr>
          <td>BTC</td>
          <td>BTC</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/BTCUSD/"
              >View</a
            >
          </td>
          <td>7</td>
          <td>100</td>
        </tr>
        <tr>
          <td>DOGE</td>
          <td>DOGE</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/DOGEUSD/"
              >View</a
            >
          </td>
          <td>5</td>
          <td>100</td>
        </tr>
        <tr>
          <td>EIGEN</td>
          <td>EIGEN</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/EIGENUSD/"
              >View</a
            >
          </td>
          <td>< 1 Year</td>
          <td>50</td>
        </tr>
        <tr>
          <td>ETH</td>
          <td>ETH</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/ETHUSD/"
              >View</a
            >
          </td>
          <td>7</td>
          <td>100</td>
        </tr>
        <tr>
          <td>GMX</td>
          <td>GMX</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/GMXUSD/"
              >View</a
            >
          </td>
          <td>2</td>
          <td>50</td>
        </tr>
        <tr>
          <td>LINK</td>
          <td>LINK</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/LINKUSD/"
              >View</a
            >
          </td>
          <td>5</td>
          <td>100</td>
        </tr>
        <tr>
          <td>LTC</td>
          <td>LTC</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/LTCUSD/"
              >View</a
            >
          </td>
          <td>6</td>
          <td>100</td>
        </tr>
        <tr>
          <td>NEAR</td>
          <td>NEAR</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/NEARUSD/"
              >View</a
            >
          </td>
          <td>3</td>
          <td>50</td>
        </tr>
        <tr>
          <td>OP</td>
          <td>OP</td>
          <td>
            <a target="_blank" href="https://www.tradingview.com/symbols/OPUSD/"
              >View</a
            >
          </td>
          <td>1</td>
          <td>50</td>
        </tr>
        <tr>
          <td>ORDI</td>
          <td>ORDI</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/ORDIUSD/"
              >View</a
            >
          </td>
          <td>< 1 Year</td>
          <td>50</td>
        </tr>
        <tr>
          <td>PEPE</td>
          <td>PEPE</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/PEPEUSD/"
              >View</a
            >
          </td>
          <td>< 1 Year</td>
          <td>50</td>
        </tr>
        <tr>
          <td>POL</td>
          <td>POL</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/POLUSD/"
              >View</a
            >
          </td>
          <td>< 1 Year</td>
          <td>50</td>
        </tr>
        <tr>
          <td>Ripple</td>
          <td>XRP</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/XRPUSD/"
              >View</a
            >
          </td>
          <td>5</td>
          <td>100</td>
        </tr>
        <tr>
          <td>SATS</td>
          <td>SATS</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/SATSUSD/"
              >View</a
            >
          </td>
          <td>< 1 Year</td>
          <td>50</td>
        </tr>
        <tr>
          <td>SHIB</td>
          <td>SHIB</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/SHIBUSD/"
              >View</a
            >
          </td>
          <td>3</td>
          <td>50</td>
        </tr>
        <tr>
          <td>Solana</td>
          <td>SOL</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/SOLUSD/"
              >View</a
            >
          </td>
          <td>3</td>
          <td>100</td>
        </tr>
        <tr>
          <td>STX</td>
          <td>STX</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/STXUSD/"
              >View</a
            >
          </td>
          <td>4</td>
          <td>50</td>
        </tr>
        <tr>
          <td>UNI</td>
          <td>UNI</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/UNIUSD/"
              >View</a
            >
          </td>
          <td>3</td>
          <td>60</td>
        </tr>
        <tr>
          <td>WIF</td>
          <td>WIF</td>
          <td>
            <a
              target="_blank"
              href="https://www.tradingview.com/symbols/WIFUSD/"
              >View</a
            >
          </td>
          <td>< 1 Year</td>
          <td>50</td>
        </tr>
      </table>

      <h2 id="callback-functions">Callback Functions</h2>

      <div class="method">
        <h3 id="init">__init__(self, trading_helper: TradingHelper)</h3>
        <p>Initializes the algorithm with the trading helper.</p>
      </div>

      <div class="method">
        <h3 id="on_ticker_recd">on_ticker_recd(self, ticker_data: dict)</h3>
        <p>
          Called when a new ticker data is received. The
          <code>ticker_data</code> object contains fields as described in the
          <a href="#dataset-fields">Dataset Fields</a> section.
        </p>
      </div>

      <div class="method">
        <h3 id="on_algo_start">on_algo_start(self)</h3>
        <p>Called when the algorithm starts.</p>
      </div>

      <div class="method">
        <h3 id="on_algo_stop">on_algo_stop(self)</h3>
        <p>Called when the algorithm stops.</p>
      </div>

      <div class="method">
        <h3 id="on_order_success">on_order_success(self)</h3>
        <p>Called when an order is successfully executed.</p>
      </div>

      <div class="method">
        <h3 id="on_order_error">on_order_error(self, error)</h3>
        <p>Called when an error occurs during order execution.</p>
      </div>

      <h2 id="dataset-fields">Dataset Fields</h2>
      <p>
        The <i>ticker_data</i> object contains the following fields for each
        asset, accessed via <code>ticker_data[asset_symbol]</code> with the
        below fields:
      </p>
      <table>
        <tr>
          <th>Field</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
        <tr>
          <td>timestamp</td>
          <td>int</td>
          <td>Unix timestamp of the data point in seconds</td>
        </tr>
        <tr>
          <td>open</td>
          <td>float</td>
          <td>Opening price of the asset for this time period</td>
        </tr>
        <tr>
          <td>high</td>
          <td>float</td>
          <td>Highest price reached during this time period</td>
        </tr>
        <tr>
          <td>low</td>
          <td>float</td>
          <td>Lowest price reached during this time period</td>
        </tr>
        <tr>
          <td>close</td>
          <td>float</td>
          <td>Closing price of the asset for this time period</td>
        </tr>
        <tr>
          <td>volume</td>
          <td>float</td>
          <td>
            Total trading volume in base asset units (e.g., BTC for BTC/USD)
          </td>
        </tr>
        <tr>
          <td>quote_volume</td>
          <td>float</td>
          <td>Total trading volume in quote currency (USD)</td>
        </tr>
        <tr>
          <td>trades</td>
          <td>int</td>
          <td>Number of trades executed during this time period</td>
        </tr>
        <tr>
          <td>taker_buy_base_volume</td>
          <td>float</td>
          <td>Volume of base asset bought by takers (market buyers)</td>
        </tr>
        <tr>
          <td>taker_buy_quote_volume</td>
          <td>float</td>
          <td>Volume in quote currency (USD) bought by takers</td>
        </tr>
      </table>

      <h2 id="helper-methods">Helper Methods</h2>

      <div class="method">
        <h3 id="open_position">
          open_position(asset: str, long: bool, collateral_usd: float, leverage:
          float, slippage_percent: float = 0.03)
        </h3>
        <p>Opens a new position or adds to an existing position.</p>
        <h4>Input Parameters:</h4>
        <ul>
          <li>
            <strong>asset</strong> (string): The asset to trade (e.g., "BTC",
            "ETH").
          </li>
          <li>
            <strong>long</strong> (boolean): True for long positions, False for
            short positions.
          </li>
          <li>
            <strong>collateral_usd</strong> (float): The amount of collateral to
            use for the position in USD.
          </li>
          <li>
            <strong>leverage</strong> (float): The leverage to use for the
            position. Total Position Value = Collateral * Leverage
          </li>
          <li>
            <strong>slippage_percent</strong> (float, optional): The expected
            slippage as a percentage. Default is 0.03%.
          </li>
        </ul>
        <h4>Output:</h4>
        <p>Position object or None if the operation fails.</p>
        <pre>
position = self.trading_helper.open_position("BTC", True, 1000, 2)
        </pre>
      </div>

      <div class="method">
        <h3 id="close_position">
          close_position(asset: str, long: bool, position_percent_to_close:
          float = 100, slippage_percent: float = 0.03)
        </h3>
        <p>Closes an existing position partially or fully.</p>
        <h4>Input Parameters:</h4>
        <ul>
          <li>
            <strong>asset</strong> (string): The asset to trade (e.g., "BTC",
            "ETH").
          </li>
          <li>
            <strong>long</strong> (boolean): True for long positions, False for
            short positions.
          </li>
          <li>
            <strong>position_percent_to_close</strong> (float, optional): The
            percentage of the position to close. Default is 100 (close entire
            position).
          </li>
          <li>
            <strong>slippage_percent</strong> (float, optional): The expected
            slippage as a percentage. Default is 0.03%.
          </li>
        </ul>
        <h4>Output:</h4>
        <p>Position object or None if the operation fails.</p>
        <pre>
position = self.trading_helper.close_position("BTC", True, 50)
        </pre>
      </div>

      <div class="method">
        <h3 id="get_usd_balance">get_usd_balance()</h3>
        <p>Retrieves the current USD balance.</p>
        <h4>Output:</h4>
        <p>float</p>
        <pre>
balance = self.trading_helper.get_usd_balance()
        </pre>
      </div>

      <div class="method">
        <h3 id="get_open_positions">get_open_positions()</h3>
        <p>Retrieves all open positions.</p>
        <h4>Output:</h4>
        <p>Dictionary of open positions</p>
        <pre>
positions = self.trading_helper.get_open_positions()
        </pre>
      </div>

      <div class="method">
        <h3 id="get_previous_tickers">
          get_previous_tickers(asset: str, previous_tickers: int)
        </h3>
        <p>Retrieves previous ticker data for a specific asset.</p>
        <h4>Input Parameters:</h4>
        <ul>
          <li>
            <strong>asset</strong> (string): The asset to get data for (e.g.,
            "BTC", "ETH").
          </li>
          <li>
            <strong>previous_tickers</strong> (int): The number of previous
            tickers to retrieve.
          </li>
        </ul>
        <h4>Output:</h4>
        <p>List of dictionaries containing previous ticker data</p>
        <pre>
tickers = self.trading_helper.get_previous_tickers("BTC", 5)
        </pre>
      </div>

      <h2 id="transaction-fees">Pricing</h2>
      <p>Transaction fees are structured as follows:</p>
      <ul>
        <li>
          <strong>Swap Fee:</strong> A flat fee of <b>0.15 USD</b> per trade.
        </li>
        <li>
          <strong>Network Fee:</strong> A fee of <b>0.1 USD</b> per trade.
        </li>
        <li>
          <strong>Long Position Hourly Fee:</strong> <b>0.0041%</b> of the
          position value per hour.
        </li>
        <li>
          <strong>Short Position Hourly Fee:</strong> <b>0.0042%</b> of the
          position value per hour.
        </li>
        <li>
          <strong>Long Trade Open Fee:</strong> <b>0.07%</b> of the position
          value.
        </li>
        <li>
          <strong>Short Trade Open Fee:</strong> <b>0.05%</b> of the position
          value.
        </li>
      </ul>

      <div class="method">
        <h3 id="rsi">Relative Strength Index</h3>
        <pre>
class MyAlgorithm:
    def __init__(self, trading_helper):
        self.prices = []
        self.trading_helper = trading_helper

    def on_ticker_recd(self, ticker_data):
        current_price = ticker_data["BTC"]["close"]
        self.prices.append(current_price)

        if len(self.prices) > 14:
            self.prices.pop(0)

        if len(self.prices) == 14:
            gains = 0
            losses = 0
            for i in range(1, 14):
                gains = gains +(max(0, self.prices[i] - self.prices[i - 1]))
                losses = losses + (max(0, self.prices[i - 1] - self.prices[i]))
            rsi = 100 - (100 / (1 + gains / losses))

            # Open a long position if RSI < 30 (oversold)
            if rsi < 30 :
                self.trading_helper.close_position( 
                    asset="ETH", 
                    long=False, 
                    position_percent_to_close=100, 
                    slippage_percent=0.01 
                )
                balance = self.trading_helper.get_usd_balance()
                self.trading_helper.open_position( 
                    asset="ETH", 
                    long=True, 
                    collateral_usd=balance, 
                    leverage=2, 
                    slippage_percent=0.02 
                )

            # Open a short position if RSI > 70 (overbought)
            elif rsi > 70:
                self.trading_helper.close_position( 
                    asset="ETH", 
                    long=True, 
                    position_percent_to_close=100, 
                    slippage_percent=0.01 
                )
                balance = self.trading_helper.get_usd_balance()
                self.trading_helper.open_position( 
                    asset="ETH", 
                    long=False, 
                    collateral_usd=balance, 
                    leverage=2, 
                    slippage_percent=0.02
                )

    def on_algo_start(self):
        pass

    def on_algo_stop(self):
        pass

    def on_order_success(self):
        pass

    def on_order_error(self, error):
        pass
        </pre>
      </div>

      <div class="method">
        <h3 id="macd">Moving Average Convergence Divergence</h3>
        <pre>
class MyAlgorithm:
    def __init__(self, trading_helper):
        self.prices = []
        self.trading_helper = trading_helper
        self.position_open = False

    def on_ticker_recd(self, ticker_data):
        current_price = ticker_data["BTC"]["close"]
        self.prices.append(current_price)

        if len(self.prices) >= 26:
            # Calculate MACD and signal line
            ema12 = sum(self.prices[-12:]) / 12
            ema26 = sum(self.prices[-26:]) / 26
            macd = ema12 - ema26
            signal_line = sum(self.prices[-9:]) / 9
            balance = self.trading_helper.get_usd_balance()
            
            # Determine leverage and collateral dynamically
            macd_diff = abs(macd - signal_line)
            leverage = 1 + min(4, macd_diff / 0.01)  # Max 5x
            collateral_usd = balance * min(1, macd_diff / 0.05)  

            if macd < signal_line and collateral_usd > 0:
                # Open a short position if MACD goes below signal line
                self.trading_helper.open_position(
                    asset="BTC", 
                    long=False, 
                    collateral_usd=collateral_usd, 
                    leverage=leverage, 
                    slippage_percent=0.02
                )
                self.position_open = True

            elif macd > signal_line and self.position_open:
                self.trading_helper.close_position(
                    asset="BTC", 
                    long=False, 
                    position_percent_to_close=100, 
                    slippage_percent=0.01
                )
                self.position_open = False

    def on_algo_start(self):
        pass

    def on_algo_stop(self):
        pass

    def on_order_success(self):
        pass

    def on_order_error(self, error):
        pass
        </pre>
      </div>

      <div class="method">
        <h3 id="mac">Moving Average Crossover</h3>
        <pre>
class MyAlgorithm:
    def __init__(self, trading_helper):
        self.short_prices = []
        self.long_prices = []
        self.trading_helper = trading_helper

    def on_ticker_recd(self, ticker_data):
        current_price = ticker_data["ETH"]["close"]
        self.short_prices.append(current_price)
        self.long_prices.append(current_price)

        # Maintain short and long windows (5 and 20 periods)
        if len(self.short_prices) > 5:
            self.short_prices.pop(0)
        if len(self.long_prices) > 20:
            self.long_prices.pop(0)

        # Calculate moving averages
        if len(self.short_prices) == 5 and len(self.long_prices) == 20:
            sma_short = sum(self.short_prices) / 5
            sma_long = sum(self.long_prices) / 20
            balance = self.trading_helper.get_usd_balance()

            # Buy if short-term MA crosses above long-term MA;
            if sma_short > sma_long:
                self.trading_helper.open_position(
                    asset="ETH",
                    long=True,
                    collateral_usd=balance,
                    leverage=1,
                    slippage_percent=0.03,
                )
            elif sma_short < sma_long:
                self.trading_helper.close_position(
                    asset="ETH",
                    long=True,
                    position_percent_to_close=100,
                    slippage_percent=0.01,
                )
    def on_algo_start(self):
        pass

    def on_algo_stop(self):
        pass

    def on_order_success(self):
        pass

    def on_order_error(self, error):
        pass
        </pre>
      </div>

      <div class="method">
        <h3 id="pt">Pairs Trading</h3>
        <pre>
class MyAlgorithm:
    def __init__(self, trading_helper):
        self.spread_history = []
        self.trading_helper = trading_helper
        self.position_open = False
        self.pair = ("BTC", "ETH")  # Example pair

    def on_ticker_recd(self, ticker_data):
        btc_price = ticker_data[self.pair[0]]["close"]
        eth_price = ticker_data[self.pair[1]]["close"]

        spread = btc_price / eth_price
        self.spread_history.append(spread)

        if len(self.spread_history) > 30:
            self.spread_history.pop(0)

        if len(self.spread_history) == 30:
            avg_spread = sum(self.spread_history) / len(self.spread_history)
            current_spread = self.spread_history[-1]
            balance = self.trading_helper.get_usd_balance()
            collateral_usd = balance * 0.25
            leverage = 2

            if current_spread > avg_spread * 1.05 and not self.position_open:
                self.trading_helper.open_position(
                    asset=self.pair[0],
                    long=False,
                    collateral_usd=collateral_usd,
                    leverage=leverage,
                    slippage_percent=0.02,
                )
                self.trading_helper.open_position(
                    asset=self.pair[1],
                    long=True,
                    collateral_usd=collateral_usd,
                    leverage=leverage,
                    slippage_percent=0.02,
                )
                self.position_open = True

            elif current_spread < avg_spread * 0.95 and not self.position_open:
                self.trading_helper.open_position(
                    asset=self.pair[0],
                    long=True,
                    collateral_usd=collateral_usd,
                    leverage=leverage,
                    slippage_percent=0.02,
                )
                self.trading_helper.open_position(
                    asset=self.pair[1],
                    long=False,
                    collateral_usd=collateral_usd,
                    leverage=leverage,
                    slippage_percent=0.02,
                )
                self.position_open = True

            elif avg_spread * 0.98 < current_spread < avg_spread * 1.02:
                if self.position_open: 
                    self.trading_helper.close_position(
                        asset=self.pair[0],
                        long=(current_spread < avg_spread),
                        position_percent_to_close=100,
                        slippage_percent=0.01,
                    )
                    self.trading_helper.close_position(
                        asset=self.pair[1],
                        long=(current_spread > avg_spread),
                        position_percent_to_close=100,
                        slippage_percent=0.01,
                    )
                    self.position_open = False
    def on_algo_start(self):
        pass

    def on_algo_stop(self):
        pass

    def on_order_success(self):
        pass

    def on_order_error(self, error):
        pass
        </pre>
      </div>

      <div class="method">
        <h3 id="bb">Bollinger Bands</h3>
        <pre>
class MyAlgorithm:
    def __init__(self, trading_helper):
        self.prices = []
        self.trading_helper = trading_helper
        self.open = False
        self.long = None

    def on_ticker_recd(self, ticker_data):
        current_price = ticker_data["BTC"]["close"]
        self.prices.append(current_price)

        if len(self.prices) > 20:
            self.prices.pop(0)

        if len(self.prices) == 20:
            # Calculate Bollinger Bands
            avg_price = sum(self.prices) / 20
            std_dev = (sum((p - avg_price)**2 for p in self.prices)/20)**0.5
            upper_band = avg_price + (2 * std_dev)
            lower_band = avg_price - (2 * std_dev)
            balance = self.trading_helper.get_usd_balance()

            if current_price > upper_band:
                # Open a short position if price breaks above upper band
                if not self.open or self.long:
                    if self.long:
                        # Close any existing long position
                        self.trading_helper.close_position(
                            asset="BTC", 
                            long=True, 
                            position_percent_to_close=100, 
                            slippage_percent=0.01
                        )
                    # Open a short position
                    self.trading_helper.open_position(
                        asset="BTC", 
                        long=False, 
                        collateral_usd=balance / 3, 
                        leverage=2, 
                        slippage_percent=0.02
                    )
                    self.open = True
                    self.long = False

            elif current_price < lower_band:
                # Open a long position if price drops below lower band
                if not self.open or not self.long:
                    if self.open and not self.long:
                        # Close any existing short position
                        self.trading_helper.close_position(
                            asset="BTC", 
                            long=False, 
                            position_percent_to_close=100, 
                            slippage_percent=0.01
                        )
                    # Open a long position
                    self.trading_helper.open_position(
                        asset="BTC", 
                        long=True, 
                        collateral_usd=balance / 3, 
                        leverage=2, 
                        slippage_percent=0.02
                    )
                    self.open = True
                    self.long = True

            elif current_price > avg_price and self.open and not self.long:
                # Close short if price reverts to the mean after upper breakout
                self.trading_helper.close_position(
                    asset="BTC", 
                    long=False, 
                    position_percent_to_close=100, 
                    slippage_percent=0.01
                )
                self.open = False

            elif current_price < avg_price and self.open and self.long:
                # Close long if price reverts to the mean after lower breakout
                self.trading_helper.close_position(
                    asset="BTC", 
                    long=True, 
                    position_percent_to_close=100, 
                    slippage_percent=0.01
                )
                self.open = False
    def on_algo_start(self):
        pass

    def on_algo_stop(self):
        pass

    def on_order_success(self):
        pass

    def on_order_error(self, error):
        pass
        </pre>
      </div>
    </div>
    <div class="libraries">
      <h2 id="available-libraries">Available Libraries</h2>
      <table>
        <tr>
          <th>Library</th>
          <th>Version</th>
          <th>Docs</th>
        </tr>
        <tr>
          <td>pandas</td>
          <td>2.2.2</td>
          <td><a href="https://pandas.pydata.org/docs/">Link</a></td>
        </tr>
        <tr>
          <td>numpy</td>
          <td>1.26.3</td>
          <td><a href="https://numpy.org/doc/stable/">Link</a></td>
        </tr>
        <tr>
          <td>ta</td>
          <td>0.11.0</td>
          <td>
            <a
              href="https://technical-analysis-library-in-python.readthedocs.io/en/latest/"
              >Link</a
            >
          </td>
        </tr>
        <tr>
          <td>matplotlib</td>
          <td>3.9.1.post1</td>
          <td>
            <a href="https://matplotlib.org/stable/contents.html">Link</a>
          </td>
        </tr>
        <tr>
          <td>scipy</td>
          <td>1.14.0</td>
          <td><a href="https://docs.scipy.org/doc/scipy/">Link</a></td>
        </tr>
        <tr>
          <td>quantstats</td>
          <td>0.0.62</td>
          <td>
            <a href="https://quantstats.com/docs/getting-started/">Link</a>
          </td>
        </tr>
        <tr>
          <td>cvxopt</td>
          <td>1.3.0</td>
          <td><a href="https://cvxopt.org/">Link</a></td>
        </tr>
        <tr>
          <td>cvxpy</td>
          <td>1.3.1</td>
          <td><a href="https://www.cvxpy.org/">Link</a></td>
        </tr>
        <tr>
          <td>hmmlearn</td>
          <td>0.3.2</td>
          <td><a href="https://hmmlearn.readthedocs.io/en/latest/">Link</a></td>
        </tr>
        <tr>
          <td>hurst</td>
          <td>0.0.5</td>
          <td><a href="https://github.com/adamgibbons/hurst">Link</a></td>
        </tr>
        <tr>
          <td>arch</td>
          <td>7.1.0</td>
          <td><a href="https://arch.readthedocs.io/en/latest/">Link</a></td>
        </tr>
        <tr>
          <td>keras</td>
          <td>2.14.0</td>
          <td><a href="https://keras.io/">Link</a></td>
        </tr>
        <tr>
          <td>pytz</td>
          <td>2024.1</td>
          <td><a href="https://pythonhosted.org/pytz/">Link</a></td>
        </tr>
        <tr>
          <td>scikit-learn</td>
          <td>1.3.1</td>
          <td><a href="https://scikit-learn.org/stable/">Link</a></td>
        </tr>
        <tr>
          <td>statsmodels</td>
          <td>0.14.1</td>
          <td>
            <a href="https://www.statsmodels.org/stable/index.html">Link</a>
          </td>
        </tr>
        <tr>
          <td>xgboost</td>
          <td>1.7.6</td>
          <td><a href="https://xgboost.readthedocs.io/en/stable/">Link</a></td>
        </tr>
      </table>
    </div>
  </body>
</html>
